<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Jedi Space Academy - Dual Player Edition üöÄ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Orbitron', 'Arial', sans-serif;
            background: radial-gradient(ellipse at center, #0a0a23 0%, #000 70%);
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Animated stars background */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            background: #fff;
            position: absolute;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Game container */
        .game-container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .game-header {
            padding: 20px;
            text-align: center;
            background: linear-gradient(45deg, rgba(255, 232, 31, 0.1), rgba(79, 195, 247, 0.1));
            border-bottom: 2px solid #ffe81f;
        }

        .game-title {
            font-size: 2.5rem;
            color: #ffe81f;
            text-shadow: 0 0 20px #ffe81f;
            margin-bottom: 10px;
        }

        .game-subtitle {
            font-size: 1.2rem;
            color: #4fc3f7;
        }

        /* Navigation */
        .nav-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #4fc3f7, #2196f3);
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .nav-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.6);
        }

        /* Main content */
        .main-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 50px 20px;
        }

        /* Player Selection Screen */
        .player-select {
            text-align: center;
            max-width: 800px;
            width: 100%;
        }

        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-bottom: 2rem;
        }

        .player-card {
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(10,10,46,0.9));
            border: 3px solid #ffe81f;
            border-radius: 25px;
            padding: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 25px rgba(255, 232, 31, 0.4);
            animation: playerFloat 4s ease-in-out infinite;
        }

        .player-card:hover {
            transform: scale(1.05) translateY(-10px);
            border-color: #4fc3f7;
            box-shadow: 0 0 40px rgba(79, 195, 247, 0.6);
        }

        .player-icon {
            font-size: 5rem;
            margin-bottom: 20px;
            display: block;
        }

        .player-name {
            font-size: 2rem;
            font-weight: bold;
            color: #ffe81f;
            margin-bottom: 8px;
            text-shadow: 0 0 15px #ffe81f;
        }

        .player-age {
            font-size: 1.2rem;
            color: #4fc3f7;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .player-description {
            color: #ccc;
            font-size: 1.1rem;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .difficulty-badge {
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1rem;
            display: inline-block;
        }

        .difficulty-badge.easy {
            background: linear-gradient(45deg, #4ade80, #22c55e);
            color: #000;
        }

        .difficulty-badge.advanced {
            background: linear-gradient(45deg, #f59e0b, #d97706);
            color: #000;
        }

        @keyframes playerFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }

        /* Mission Selection Screen */
        .mission-select {
            text-align: center;
            max-width: 1000px;
            width: 100%;
            display: none;
        }

        .mission-title {
            font-size: 2.5rem;
            color: #ffe81f;
            text-shadow: 0 0 20px #ffe81f;
            margin-bottom: 15px;
        }

        .mission-subtitle {
            font-size: 1.2rem;
            color: #4fc3f7;
            margin-bottom: 40px;
        }

        .planets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .planet-card {
            background: linear-gradient(135deg, rgba(255, 232, 31, 0.1), rgba(79, 195, 247, 0.1));
            border: 3px solid #ffe81f;
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            animation: planetFloat 6s ease-in-out infinite;
        }

        .planet-card:hover {
            transform: scale(1.05) translateY(-10px);
            border-color: #4fc3f7;
            box-shadow: 0 0 30px rgba(79, 195, 247, 0.5);
        }

        .planet-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
        }

        .planet-name {
            font-size: 1.8rem;
            color: #ffe81f;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .planet-description {
            color: #ccc;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .planet-progress {
            background: rgba(0,0,0,0.5);
            height: 8px;
            border-radius: 4px;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(45deg, #4ade80, #22c55e);
            height: 100%;
            transition: width 0.3s ease;
        }

        .planet-status {
            color: #4fc3f7;
            font-size: 0.9rem;
        }

        @keyframes planetFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(2deg); }
        }

        /* Mission Screen */
        .mission-screen {
            display: none;
            max-width: 900px;
            width: 100%;
            text-align: center;
        }

        .mission-header {
            background: linear-gradient(135deg, rgba(255, 232, 31, 0.1), rgba(79, 195, 247, 0.1));
            border: 2px solid #ffe81f;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .mission-planet-name {
            font-size: 2rem;
            color: #ffe81f;
            margin-bottom: 15px;
        }

        .mission-story {
            font-size: 1.2rem;
            color: #4fc3f7;
            line-height: 1.5;
        }

        .challenge-container {
            background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(10,10,46,0.9));
            border: 2px solid #4fc3f7;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .challenge-question {
            font-size: 1.8rem;
            color: #ffe81f;
            margin-bottom: 30px;
            font-weight: bold;
        }

        .challenge-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .option-button {
            background: linear-gradient(45deg, #4fc3f7, #2196f3);
            color: #000;
            border: none;
            padding: 20px;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.6);
        }

        .option-button.correct {
            background: linear-gradient(45deg, #4ade80, #22c55e);
            color: #fff;
        }

        .option-button.incorrect {
            background: linear-gradient(45deg, #ef4444, #dc2626);
            color: #fff;
        }

        .mission-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-button {
            background: linear-gradient(45deg, #6b7280, #4b5563);
            color: #fff;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: scale(1.05);
        }

        .mission-progress {
            color: #4fc3f7;
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* Control buttons */
        .controls {
            text-align: center;
            margin-top: 20px;
        }

        .control-button {
            background: linear-gradient(45deg, #4fc3f7, #2196f3);
            color: #000;
            border: none;
            padding: 15px 25px;
            margin: 10px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.6);
        }

        /* Story cutscene */
        .story-cutscene {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .cutscene-content {
            background: linear-gradient(135deg, rgba(255, 232, 31, 0.1), rgba(79, 195, 247, 0.1));
            border: 3px solid #ffe81f;
            border-radius: 25px;
            padding: 50px;
            max-width: 600px;
            text-align: center;
        }

        .cutscene-title {
            font-size: 2.5rem;
            color: #ffe81f;
            margin-bottom: 20px;
        }

        .cutscene-text {
            font-size: 1.3rem;
            color: #4fc3f7;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .cutscene-button {
            background: linear-gradient(45deg, #4fc3f7, #2196f3);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cutscene-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.6);
        }

        /* Achievement popup */
        .achievement {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #4ade80, #22c55e);
            color: #000;
            padding: 20px 40px;
            border-radius: 25px;
            font-size: 1.5rem;
            font-weight: bold;
            z-index: 1001;
            animation: achievementPop 3s ease-in-out;
        }

        @keyframes achievementPop {
            0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20%, 80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .game-title { font-size: 2rem; }
            .mission-title { font-size: 2rem; }
            .challenge-question { font-size: 1.4rem; }
            .option-button { font-size: 1rem; padding: 15px; }
            .nav-buttons { position: relative; top: auto; right: auto; justify-content: center; margin-top: 20px; }
        }
    </style>
</head>
<body>
    <div class="stars-container" id="stars"></div>
    
    <div class="game-container">
        <div class="game-header">
            <div class="nav-buttons">
                <a href="index.html" class="nav-btn">üè† Hello World</a>
                <button class="nav-btn" id="playerBtn" onclick="returnToPlayerSelect()" style="display: none;">üë• Change Player</button>
            </div>
            <h1 class="game-title">üöÄ Jedi Space Academy üöÄ</h1>
            <p class="game-subtitle">Choose Your Young Jedi and Begin Training</p>
        </div>

        <div class="main-content">
            <!-- Player Selection Screen -->
            <div class="player-select" id="playerSelect">
                <h1 class="mission-title">Choose Your Jedi</h1>
                <p class="mission-subtitle">Which young Jedi will be training today?</p>
                
                <div class="players-grid">
                    <div class="player-card" onclick="selectPlayer('jai')">
                        <span class="player-icon">üë∂</span>
                        <div class="player-name">Jedi Jai</div>
                        <div class="player-age">6 Years Old</div>
                        <div class="player-description">
                            Perfect for beginners! Easy math, simple words, and fun patterns.
                        </div>
                        <div class="difficulty-badge easy">‚≠ê Youngling Level</div>
                    </div>

                    <div class="player-card" onclick="selectPlayer('sidd')">
                        <span class="player-icon">üßë</span>
                        <div class="player-name">Jedi Sidd</div>
                        <div class="player-age">9 Years Old</div>
                        <div class="player-description">
                            Advanced challenges! Complex math, bigger words, and tricky logic puzzles.
                        </div>
                        <div class="difficulty-badge advanced">‚≠ê‚≠ê‚≠ê Knight Level</div>
                    </div>
                </div>
            </div>

            <!-- Mission Selection Screen -->
            <div class="mission-select" id="missionSelect">
                <h1 class="mission-title">Choose Your Adventure</h1>
                <p class="mission-subtitle">Select a planet to begin your training!</p>
                
                <div class="planets-grid">
                    <div class="planet-card" onclick="selectPlanet('math')">
                        <span class="planet-icon">ü™ê</span>
                        <div class="planet-name">Calculon Prime</div>
                        <div class="planet-description">
                            Math challenges await! Help solve calculations to save the galaxy.
                        </div>
                        <div class="planet-progress">
                            <div class="progress-fill" id="mathProgress" style="width: 0%"></div>
                        </div>
                        <div class="planet-status" id="mathStatus">Ready for Adventure!</div>
                    </div>

                    <div class="planet-card" onclick="selectPlanet('words')">
                        <span class="planet-icon">üåç</span>
                        <div class="planet-name">Vocabularis</div>
                        <div class="planet-description">
                            Decode secret messages! Learn powerful words to help the Rebellion.
                        </div>
                        <div class="planet-progress">
                            <div class="progress-fill" id="wordsProgress" style="width: 0%"></div>
                        </div>
                        <div class="planet-status" id="wordsStatus">Ready for Adventure!</div>
                    </div>

                    <div class="planet-card" onclick="selectPlanet('logic')">
                        <span class="planet-icon">üîÆ</span>
                        <div class="planet-name">Pattern Nexus</div>
                        <div class="planet-description">
                            Solve ancient patterns! Unlock hidden Force powers and wisdom.
                        </div>
                        <div class="planet-progress">
                            <div class="progress-fill" id="logicProgress" style="width: 0%"></div>
                        </div>
                        <div class="planet-status" id="logicStatus">Ready for Adventure!</div>
                    </div>
                </div>

                <div class="controls">
                    <button class="control-button" onclick="returnToPlayerSelect()">üë• Change Player</button>
                </div>
            </div>

            <!-- Mission Screen -->
            <div class="mission-screen" id="missionScreen">
                <div class="mission-header">
                    <h2 class="mission-planet-name" id="currentPlanetName">Planet Name</h2>
                    <div class="mission-story" id="missionStory">Mission story will appear here...</div>
                </div>

                <div class="challenge-container">
                    <div class="challenge-question" id="challengeQuestion">Question will appear here</div>
                    <div class="challenge-options" id="challengeOptions">
                        <!-- Options will be generated here -->
                    </div>
                </div>

                <div class="mission-controls">
                    <button class="back-button" onclick="returnToMissionSelect()">
                        ‚Üê Back to Space Map
                    </button>
                    <div class="mission-progress" id="missionProgressText">
                        Mission 1 of 5
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Story Cutscene -->
    <div class="story-cutscene" id="storyCutscene">
        <div class="cutscene-content">
            <h2 class="cutscene-title" id="cutsceneTitle">Achievement Unlocked!</h2>
            <p class="cutscene-text" id="cutsceneText">Story text will appear here...</p>
            <button class="cutscene-button" onclick="closeCutscene()">Continue Adventure</button>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            currentPlayer: null,
            currentPlanet: null,
            currentMission: 0,
            planetProgress: {
                math: 0,
                words: 0,
                logic: 0
            }
        };

        // Mission data for Jai (6-year-old, easy level)
        const jaiMissions = {
            math: {
                name: "Calculon Prime",
                story: "R2-D2 needs your help! The Death Star's computers are broken. Use your math skills to fix them!",
                missions: [
                    {
                        story: "R2-D2 beeps! The hyperdrive calculation is wrong!",
                        question: "What is 3 + 4?",
                        options: ["6", "7", "8", "9"],
                        correct: 1,
                        celebration: "üöÄ Excellent! The hyperdrive is working!"
                    },
                    {
                        story: "The shield generator needs power calculations!",
                        question: "What is 5 √ó 2?",
                        options: ["8", "10", "12", "15"],
                        correct: 1,
                        celebration: "‚ö° Amazing! The shields are online!"
                    },
                    {
                        story: "Help count the escape pods!",
                        question: "What is 12 √∑ 3?",
                        options: ["3", "4", "5", "6"],
                        correct: 1,
                        celebration: "üõ∏ Perfect! Everyone can escape!"
                    },
                    {
                        story: "Luke's X-wing needs fuel calculations!",
                        question: "What is 8 - 3?",
                        options: ["4", "5", "6", "7"],
                        correct: 1,
                        celebration: "‚úàÔ∏è Great! Luke has enough fuel!"
                    },
                    {
                        story: "The Millennium Falcon needs coordinates!",
                        question: "What is 6 + 7?",
                        options: ["12", "13", "14", "15"],
                        correct: 1,
                        celebration: "üåü Incredible! Han found the base!"
                    }
                ]
            },
            words: {
                name: "Vocabularis",
                story: "Help the Rebels decode secret messages! Learn powerful words to save the galaxy!",
                missions: [
                    {
                        story: "Princess Leia sent a coded message!",
                        question: "What does 'BRAVE' mean?",
                        options: ["Scared", "Courageous", "Tired", "Hungry"],
                        correct: 1,
                        celebration: "üëë Excellent! Message decoded!"
                    },
                    {
                        story: "Yoda left a wisdom scroll!",
                        question: "What does 'WISDOM' mean?",
                        options: ["Knowledge", "Food", "Sleep", "Fast"],
                        correct: 0,
                        celebration: "üßô‚Äç‚ôÇÔ∏è Wonderful! Yoda is proud!"
                    },
                    {
                        story: "The Jedi Council has an important word!",
                        question: "What does 'PEACE' mean?",
                        options: ["War", "Calm", "Noise", "Running"],
                        correct: 1,
                        celebration: "‚òÆÔ∏è Perfect! Galaxy is peaceful!"
                    },
                    {
                        story: "C-3PO is translating ancient text!",
                        question: "What does 'FORCE' mean in Star Wars?",
                        options: ["Push", "Magic", "Energy", "Ship"],
                        correct: 2,
                        celebration: "üåå Amazing! Translation complete!"
                    },
                    {
                        story: "Chewbacca found a Wookiee saying!",
                        question: "What does 'FRIENDSHIP' mean?",
                        options: ["Alone", "Caring", "Fighting", "Eating"],
                        correct: 1,
                        celebration: "üêª Roooaaaar! Chewie is happy!"
                    }
                ]
            },
            logic: {
                name: "Pattern Nexus",
                story: "Ancient Jedi temples have mystical patterns! Solve them to unlock Force powers!",
                missions: [
                    {
                        story: "Yoda's meditation chamber glows!",
                        question: "What comes next? 2, 4, 6, ?",
                        options: ["7", "8", "9", "10"],
                        correct: 1,
                        celebration: "üßò‚Äç‚ôÇÔ∏è Excellent! Yoda's power unlocked!"
                    },
                    {
                        story: "The Jedi Temple door shows a sequence!",
                        question: "What comes next? 1, 3, 5, ?",
                        options: ["6", "7", "8", "9"],
                        correct: 1,
                        celebration: "üèõÔ∏è Amazing! The door opens!"
                    },
                    {
                        story: "Obi-Wan's lightsaber crystal resonates!",
                        question: "What comes next? 5, 10, 15, ?",
                        options: ["18", "20", "22", "25"],
                        correct: 1,
                        celebration: "‚öîÔ∏è Perfect! Lightsaber glows!"
                    },
                    {
                        story: "The Force flows through this pattern!",
                        question: "What comes next? 1, 4, 7, ?",
                        options: ["9", "10", "11", "12"],
                        correct: 1,
                        celebration: "üåü Incredible! Feel the Force!"
                    },
                    {
                        story: "Death Star plans reveal a pattern!",
                        question: "What comes next? 3, 6, 9, ?",
                        options: ["11", "12", "13", "15"],
                        correct: 1,
                        celebration: "üí´ Outstanding! Weakness found!"
                    }
                ]
            }
        };

        // Mission data for Sidd (9-year-old, advanced level)
        const siddMissions = {
            math: {
                name: "Calculon Prime",
                story: "Commander Sidd! The Death Star's quantum computers need advanced calculations!",
                missions: [
                    {
                        story: "The hyperdrive needs complex multiplication!",
                        question: "What is 47 √ó 23?",
                        options: ["1081", "1171", "1061", "1051"],
                        correct: 0,
                        celebration: "üöÄ Incredible! Advanced math mastered!"
                    },
                    {
                        story: "Power core requires division calculations!",
                        question: "What is 2484 √∑ 12?",
                        options: ["207", "197", "217", "187"],
                        correct: 0,
                        celebration: "‚ö° Amazing! Core stabilized!"
                    },
                    {
                        story: "Calculate escape velocity with fractions!",
                        question: "What is 3/4 + 2/8?",
                        options: ["5/12", "1", "5/8", "7/8"],
                        correct: 1,
                        celebration: "üõ∏ Perfect! Ships can escape!"
                    },
                    {
                        story: "X-wing squadron needs fuel percentages!",
                        question: "What is 35% of 240?",
                        options: ["84", "74", "94", "64"],
                        correct: 0,
                        celebration: "‚úàÔ∏è Excellent! All fighters fueled!"
                    },
                    {
                        story: "Calculate coordinates using decimals!",
                        question: "What is 15.7 √ó 4.2?",
                        options: ["65.94", "66.94", "64.94", "67.94"],
                        correct: 0,
                        celebration: "üåü Outstanding! Base located!"
                    }
                ]
            },
            words: {
                name: "Vocabularis",
                story: "Master Sidd! Decode advanced diplomatic messages with expanded vocabulary!",
                missions: [
                    {
                        story: "Princess Leia sent encrypted diplomatic message!",
                        question: "What does 'ALLIANCE' mean?",
                        options: ["Enemy group", "Partnership", "Spaceship", "Planet"],
                        correct: 1,
                        celebration: "üëë Excellent! The Alliance grows stronger!"
                    },
                    {
                        story: "Yoda's ancient texts use complex words!",
                        question: "What does 'PERSEVERANCE' mean?",
                        options: ["Give up", "Never try", "Keep trying despite difficulties", "Run away"],
                        correct: 2,
                        celebration: "üßô‚Äç‚ôÇÔ∏è Wise you are! Strong with Force!"
                    },
                    {
                        story: "Jedi Council discusses important concepts!",
                        question: "What does 'DEMOCRACY' mean?",
                        options: ["Rule by one", "Government by people", "No government", "Rule by robots"],
                        correct: 1,
                        celebration: "‚òÆÔ∏è Perfect! You understand galactic politics!"
                    },
                    {
                        story: "C-3PO found ancient scientific texts!",
                        question: "What does 'HYPOTHESIS' mean?",
                        options: ["Proven fact", "Wild guess", "Theory to test", "Old story"],
                        correct: 2,
                        celebration: "üåå Amazing! You think like a scientist!"
                    },
                    {
                        story: "Rebel strategy requires complex understanding!",
                        question: "What does 'CONSEQUENCE' mean?",
                        options: ["First thing", "Result of action", "Type of weapon", "Jedi power"],
                        correct: 1,
                        celebration: "üêª Roooaaaar! Strategic thinking!"
                    }
                ]
            },
            logic: {
                name: "Pattern Nexus",
                story: "Jedi Master Sidd! Ancient Sith temples contain complex mathematical patterns!",
                missions: [
                    {
                        story: "Sith Temple shows fibonacci pattern!",
                        question: "What comes next? 1, 1, 2, 3, 5, 8, ?",
                        options: ["11", "13", "15", "12"],
                        correct: 1,
                        celebration: "üßò‚Äç‚ôÇÔ∏è Incredible! Fibonacci mastered!"
                    },
                    {
                        story: "Death Star blueprint reveals square pattern!",
                        question: "What comes next? 1, 4, 9, 16, 25, ?",
                        options: ["30", "35", "36", "49"],
                        correct: 2,
                        celebration: "üèõÔ∏è Amazing! Perfect squares!"
                    },
                    {
                        story: "Obi-Wan's crystal shows multiplication pattern!",
                        question: "What comes next? 2, 6, 18, 54, ?",
                        options: ["162", "108", "216", "144"],
                        correct: 0,
                        celebration: "‚öîÔ∏è Perfect! Pattern √ó 3 mastered!"
                    },
                    {
                        story: "Force reveals prime number sequence!",
                        question: "What comes next? 2, 3, 5, 7, 11, ?",
                        options: ["12", "13", "15", "17"],
                        correct: 1,
                        celebration: "üåü Incredible! Prime numbers flow!"
                    },
                    {
                        story: "Emperor's throne has exponential pattern!",
                        question: "What comes next? 2, 4, 8, 16, 32, ?",
                        options: ["48", "64", "56", "72"],
                        correct: 1,
                        celebration: "üí´ Outstanding! Powers of 2!"
                    }
                ]
            }
        };

        // Get mission data based on current player
        function getMissionData() {
            return gameState.currentPlayer === 'sidd' ? siddMissions : jaiMissions;
        }

        // Create animated stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numStars = 100;
            
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Player selection
        function selectPlayer(player) {
            gameState.currentPlayer = player;
            console.log('Player selected:', player);
            
            // Hide player selection, show mission selection
            document.getElementById('playerSelect').style.display = 'none';
            document.getElementById('missionSelect').style.display = 'block';
            
            // Show Change Player button
            document.getElementById('playerBtn').style.display = 'inline-block';
            
            // Show welcome message
            const playerName = player === 'jai' ? 'Jedi Jai' : 'Jedi Sidd';
            const level = player === 'jai' ? 'Youngling' : 'Knight';
            const welcomeMessage = player === 'jai' ? 
                `üåü Welcome, Jedi Jai! Ready for fun learning adventures? Choose your first planet!` :
                `üåü Welcome, Jedi Sidd! Ready for advanced galactic challenges? Choose your mission!`;
            
            showStory(`Welcome ${playerName}!`, welcomeMessage);
        }

        // Planet selection
        function selectPlanet(planetType) {
            gameState.currentPlanet = planetType;
            gameState.currentMission = 0;
            
            const missionData = getMissionData();
            const planet = missionData[planetType];
            
            showStory(`üöÄ Destination: ${planet.name}`, planet.story, () => {
                showMissionScreen();
            });
        }

        // Show mission screen
        function showMissionScreen() {
            document.getElementById('missionSelect').style.display = 'none';
            document.getElementById('missionScreen').style.display = 'block';
            
            loadCurrentMission();
        }

        // Load current mission
        function loadCurrentMission() {
            const missionData = getMissionData();
            const planet = missionData[gameState.currentPlanet];
            const mission = planet.missions[gameState.currentMission];
            
            document.getElementById('currentPlanetName').textContent = planet.name;
            document.getElementById('missionStory').textContent = mission.story;
            document.getElementById('challengeQuestion').textContent = mission.question;
            document.getElementById('missionProgressText').textContent = 
                `Mission ${gameState.currentMission + 1} of ${planet.missions.length}`;
            
            // Create option buttons
            const optionsContainer = document.getElementById('challengeOptions');
            optionsContainer.innerHTML = '';
            
            mission.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = option;
                button.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(button);
            });
        }

        // Handle answer selection
        function selectAnswer(selectedIndex) {
            const missionData = getMissionData();
            const planet = missionData[gameState.currentPlanet];
            const mission = planet.missions[gameState.currentMission];
            const buttons = document.querySelectorAll('.option-button');
            
            // Disable all buttons
            buttons.forEach(button => button.style.pointerEvents = 'none');
            
            if (selectedIndex === mission.correct) {
                // Correct answer
                buttons[selectedIndex].classList.add('correct');
                
                setTimeout(() => {
                    gameState.planetProgress[gameState.currentPlanet]++;
                    updatePlanetProgress();
                    
                    showAchievement(mission.celebration);
                    
                    setTimeout(() => {
                        gameState.currentMission++;
                        
                        if (gameState.currentMission >= planet.missions.length) {
                            completePlanet();
                        } else {
                            loadCurrentMission();
                        }
                    }, 2500);
                }, 1000);
            } else {
                // Incorrect answer
                buttons[selectedIndex].classList.add('incorrect');
                buttons[mission.correct].classList.add('correct');
                
                setTimeout(() => {
                    showAchievement("üí™ Good try! Learn from mistakes, young Jedi!");
                    setTimeout(() => {
                        loadCurrentMission();
                    }, 2500);
                }, 1000);
            }
        }

        // Complete planet
        function completePlanet() {
            const missionData = getMissionData();
            const planet = missionData[gameState.currentPlanet];
            const totalCompleted = Object.values(gameState.planetProgress).reduce((a, b) => a + b, 0);
            
            let completionMessage = `üéâ ${planet.name} Completed! üéâ\n\n`;
            
            if (totalCompleted >= 15) {
                completionMessage += "üèÜ INCREDIBLE! You've mastered all planets! True Jedi Master!";
            } else if (totalCompleted >= 10) {
                completionMessage += "‚öîÔ∏è Amazing progress! You're becoming a powerful Jedi!";
            } else {
                completionMessage += "üåü Excellent work! Ready for your next adventure?";
            }
            
            showStory("Mission Complete!", completionMessage, () => {
                returnToMissionSelect();
            });
        }

        // Return to mission select
        function returnToMissionSelect() {
            document.getElementById('missionScreen').style.display = 'none';
            document.getElementById('missionSelect').style.display = 'block';
            gameState.currentPlanet = null;
            gameState.currentMission = 0;
        }

        // Return to player selection
        function returnToPlayerSelect() {
            document.getElementById('missionScreen').style.display = 'none';
            document.getElementById('missionSelect').style.display = 'none';
            document.getElementById('playerSelect').style.display = 'block';
            
            // Hide Change Player button
            document.getElementById('playerBtn').style.display = 'none';
            
            // Reset game state
            gameState.currentPlayer = null;
            gameState.currentPlanet = null;
            gameState.currentMission = 0;
            gameState.planetProgress = { math: 0, words: 0, logic: 0 };
        }

        // Update planet progress
        function updatePlanetProgress() {
            const missionData = getMissionData();
            Object.keys(gameState.planetProgress).forEach(planet => {
                const progress = gameState.planetProgress[planet];
                const maxMissions = missionData[planet].missions.length;
                const percentage = (progress / maxMissions) * 100;
                
                const progressBar = document.getElementById(`${planet}Progress`);
                if (progressBar) {
                    progressBar.style.width = percentage + '%';
                }
                
                const statusElement = document.getElementById(`${planet}Status`);
                if (statusElement) {
                    let status;
                    if (progress === maxMissions) {
                        status = "üèÜ Planet Mastered!";
                    } else if (progress > 0) {
                        status = `${progress}/${maxMissions} missions complete`;
                    } else {
                        status = "Ready for Adventure!";
                    }
                    statusElement.textContent = status;
                }
            });
        }

        // Show story cutscene
        function showStory(title, text, callback = null) {
            document.getElementById('cutsceneTitle').textContent = title;
            document.getElementById('cutsceneText').textContent = text;
            document.getElementById('storyCutscene').style.display = 'flex';
            
            window.currentStoryCallback = callback;
        }

        // Close cutscene
        function closeCutscene() {
            document.getElementById('storyCutscene').style.display = 'none';
            if (window.currentStoryCallback) {
                window.currentStoryCallback();
                window.currentStoryCallback = null;
            }
        }

        // Show achievement
        function showAchievement(text) {
            const achievement = document.createElement('div');
            achievement.className = 'achievement';
            achievement.textContent = text;
            document.body.appendChild(achievement);
            
            setTimeout(() => {
                if (achievement.parentNode) {
                    achievement.remove();
                }
            }, 3000);
        }

        // Initialize game
        function initGame() {
            createStars();
            console.log('Jedi Space Academy initialized');
        }

        // Start the game when page loads
        window.addEventListener('load', initGame);
    </script>
</body>
</html> 